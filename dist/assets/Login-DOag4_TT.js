import{r as e,u as s,j as a,B as r,L as t}from"./index-DtJyNnPh.js";import{L as l,y as n}from"./ReactToastify-B9FReDOp.js";import{I as i}from"./input-gm71nbeb.js";import{C as o,a as c,b as m,c as d,d as h}from"./card-LuGwFhsV.js";const p=({setIsAuthenticated:p})=>{const[x,u]=e.useState({email:"",password:""}),[f,g]=e.useState(!1),j=s(),y=e=>{u({...x,[e.target.id]:e.target.value})};return a.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-primary-dark px-4 py-20",children:[a.jsx(l,{}),a.jsxs(o,{className:"w-full max-w-md bg-white",children:[a.jsxs(c,{className:"space-y-1",children:[a.jsx(m,{className:"text-2xl font-bold",children:"Welcome Back"}),a.jsx(d,{children:"Enter your credentials to access your account"})]}),a.jsx(h,{children:a.jsxs("form",{className:"space-y-4",onSubmit:async e=>{if(e.preventDefault(),s=x.email,!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s))return n.error("Invalid email format!");var s;if(x.password.length<6)return n.error("Password must be at least 6 characters long!");g(!0);try{const e=await fetch("https://investpro-h8qu.onrender.com/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)}),s=await e.json();if(console.log(s.user),!e.ok)throw new Error(s.message||"Login failed. Please try again.");n.success("Login successful!");const a=(new Date).getTime()+36e5;localStorage.setItem("token",s.token),localStorage.setItem("expiryDate",a.toString()),p(!0),j(`/${s.user.role}/dashboard`)}catch(a){n.error(a.message)}finally{g(!1)}},children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{htmlFor:"email",className:"text-sm font-medium",children:"Email"}),a.jsx(i,{id:"email",type:"email",placeholder:"name@example.com",className:"w-full",value:x.email,onChange:y})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{htmlFor:"password",className:"text-sm font-medium",children:"Password"}),a.jsx(i,{id:"password",type:"password",className:"w-full",value:x.password,onChange:y})]}),a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("a",{href:"#",className:"text-sm text-primary hover:underline",children:"Forgot password?"})}),a.jsx(r,{type:"submit",className:"w-full bg-primary hover:bg-primary/90",disabled:f,children:f?"Signing in...":a.jsxs(a.Fragment,{children:[a.jsx(t,{className:"mr-2 h-4 w-4"})," Sign In"]})}),a.jsxs("p",{className:"text-center text-sm text-gray-600",children:["Don't have an account?"," ",a.jsx("a",{href:"/signup",className:"text-primary hover:underline",children:"Sign up"})]})]})})]})]})};export{p as default};
