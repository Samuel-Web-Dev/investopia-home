import{r as s,j as e,P as a,a as r,I as t,H as o,u as n,n as l,B as i}from"./index-KrjSCS3J.js";import{C as c,a as d,b as m,d as w}from"./card-B7BNxfey.js";import{I as u}from"./input-DO2ZWA01.js";import{U as p}from"./user-cog-BfhvPmJE.js";var h=s.forwardRef(((s,r)=>e.jsx(a.label,{...s,ref:r,onMouseDown:e=>{e.target.closest("button, input, select, textarea")||(s.onMouseDown?.(e),!e.defaultPrevented&&e.detail>1&&e.preventDefault())}})));h.displayName="Label";var x=h;const f=t("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),j=s.forwardRef((({className:s,...a},t)=>e.jsx(x,{ref:t,className:r(f(),s),...a})));j.displayName=x.displayName;const g=()=>{const{state:a}=o(),{name:r,email:t,userId:h}=a||{},x=n(),[f,g]=s.useState(!1),{toast:N}=l(),[P,v]=s.useState({name:r||"",email:t||"",currentPassword:"",newPassword:"",confirmPassword:""});return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 pt-12",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs(c,{className:"max-w-2xl mx-auto",children:[e.jsx(d,{className:"space-y-1",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{className:"w-6 h-6 text-primary"}),e.jsx(m,{className:"text-2xl",children:"Account Settings"})]})}),e.jsx(w,{children:e.jsxs("form",{onSubmit:async s=>{if(s.preventDefault(),P.newPassword===P.confirmPassword){g(!0);try{const s=localStorage.getItem("token"),e=await fetch(`https://investpro-h8qu.onrender.com/investor/dashboard/account_setting/${h}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({name:P.name,email:P.email,currentPassword:P.currentPassword,newPassword:P.newPassword,confirmPassword:P.confirmPassword})});if(!e.ok){const s=await e.json();throw new Error(s.message||"Failed to update account settings")}const a=await e.json();console.log(a),N({title:"Success",description:a.message||"Your account settings have been updated"}),x("/investor/dashboard")}catch(e){N({title:"Error",description:e.message||"Failed to update account settings"})}finally{g(!1)}}else N({title:"Error",description:"New passwords do not match"})},className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"name",children:"Name"}),e.jsx(u,{id:"name",type:"text",value:P.name,onChange:s=>v({...P,name:s.target.value}),className:"w-full"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"email",children:"Email"}),e.jsx(u,{id:"email",type:"email",value:P.email,onChange:s=>v({...P,email:s.target.value}),className:"w-full"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"currentPassword",children:"Current Password"}),e.jsx(u,{id:"currentPassword",type:"password",value:P.currentPassword,onChange:s=>v({...P,currentPassword:s.target.value}),className:"w-full"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"newPassword",children:"New Password"}),e.jsx(u,{id:"newPassword",type:"password",value:P.newPassword,onChange:s=>v({...P,newPassword:s.target.value}),className:"w-full"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"confirmPassword",children:"Confirm New Password"}),e.jsx(u,{id:"confirmPassword",type:"password",value:P.confirmPassword,onChange:s=>v({...P,confirmPassword:s.target.value}),className:"w-full"})]}),e.jsx(i,{type:"submit",className:"w-full",children:"Save Changes"})]})})]})})})};export{g as default};
